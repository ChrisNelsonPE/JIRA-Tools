<!DOCTYPE html>
<html ng-app="jiragantt">

<head>
  <link rel="stylesheet" type="text/css" href="Gantt Chart/jsgantt.css" />
  <script language="javascript" src="Gantt Chart/jsgantt.js"></script>
  <script src="https://code.angularjs.org/1.5.8/angular.js"></script>
  <script src="shared/parameters.js"></script>
  <script src="shared/jira.js"></script>
  <link rel="stylesheet" type="text/css" href="shared/style.css" />
  <script language="javascript" src="Gantt Chart/tasks.js"></script>
  <script language="javascript" src="Gantt Chart/gantt.js"></script>
</head>

<body>
  <section ng-controller="MainCtrl as vm">
    <div ng-init="showCriteria=true" ng-click="showCriteria = ! showCriteria">
      <div class='fold-button'>{{showCriteria ? "&#x2B9F;" : "&#x2B9E;"}}</div>
      <h1>
        Jira Gantt
      </h1>
    </div>
    <div ng-show="showCriteria">
    <div>
      <label>Jira Domain:</label>
      <input type="text" ng-model="vm.domain"/>
    </div>
    <br>
    <div>
      <label>User id:</label>
      <input type="text" ng-model="vm.userId"/>
      <label>Password:</label>
      <input type="password" ng-model="vm.password"/>
    </div>
    <div>
      <input type="checkbox" ng-model="vm.remember">
      <label>Remember me</label>
    </div>
    <br>
    <div>
      <label>Query by:</label><br>
      <span ng-repeat='t in vm.queryTypes'>
        <input id="queryType-{{t}}"
               type='radio'
               name='queryType'
               value='{{t}}' ng-model='vm.queryType'/>
        <label for='queryType-{{t}}'>{{t}}</label>
        <input ng-show='"{{t}}"=="filter"'
               ng-disabled='vm.queryType!="filter"'
               type='text'
               ng-model='vm.filterNumber'/>
        <span ng-show='"{{t}}"=="projects"'>
          <input type='text'
                 ng-disabled='vm.queryType!="projects"'
                 ng-model='vm.projects'/>
          <input type='checkbox'
                 ng-disabled='vm.queryType!="projects"'
                 ng-model='vm.limitToGroup'/>
          <label>Limit to Jira group</label>
          <input type='text'
                 ng-disabled='vm.queryType!="projects" || !vm.limitToGroup'
                 ng-model='vm.group'/>
        </span>
        <br>
      </span>
    </div>
    <br>
    <div>
      <label>Default estimate:</label>
      <input type="number" ng-model="vm.defaultEstimateHours"/>
      hours
    </div>
    <div>
      <label>Availability:</label>
      <input type="number" ng-model="vm.availableHours"/>
      hours per day
    </div>
    <br>
    <div>
      <input type="checkbox" ng-model="vm.hideDep" ng-change="vm.interlock()">
      <label>Hide dependencies</label>
      <input type="checkbox" ng-disabled="!vm.hideDep" ng-model="vm.hideDone">
      <label>Hide done</label>
    </div>
    <br>
    </div>
    <button ng-click="vm.submit()">Get estimates</button><br>
    <hr>

    <div style="position:relative" class="gantt" id="GanttChartDIV"></div>    

    <span>{{vm.message}}</span>
  </section>
</body>

</html>
